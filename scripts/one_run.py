import matplotlib
from pathos.multiprocessing import ProcessingPool as Pool

matplotlib.use('TkAgg')

import spectroseti.runner as runner

observations = [['awx', 222]]  # ,[],['awx',223],['awx',224]]
bacrun = [['bac', 179],
          ['bac', 180],
          ['bac', 181],
          ['bac', 182],
          ['bac', 183],
          ['bac', 184],
          ['bac', 185],
          ['bac', 186],
          ['bac', 187],
          ['bac', 188],
          ['bac', 189],
          ['bac', 190],
          ['bac', 191],
          ['bac', 192],
          ['bac', 193],
          ['bac', 194],
          ['bac', 195],
          ['bac', 196],
          ['bac', 197],
          ['bac', 198],
          ['bac', 199],
          ['bac', 200],
          ['bac', 201],
          ['bac', 202],
          ['bac', 203],
          ['bac', 204],
          ['bac', 205],
          ['bac', 206],
          ['bac', 207],
          ['bac', 208],
          ['bac', 209],
          ['bac', 210],
          ['bac', 211],
          ['bac', 212],
          ['bac', 213],
          ['bac', 214],
          ['bac', 215],
          ['bac', 216],
          ['bac', 217],
          ['bac', 218],
          ['bac', 219],
          ['bac', 220],
          ['bac', 221],
          ['bac', 222],
          ['bac', 223],
          ['bac', 224],
          ['bac', 225],
          ['bac', 226],
          ['bac', 227],
          ['bac', 228],
          ['bac', 229],
          ['bac', 230],
          ['bac', 231],
          ['bac', 232],
          ['bac', 233],
          ['bac', 234],
          ['bac', 235],
          ['bac', 236],
          ['bac', 237],
          ['bac', 238],
          ['bac', 239],
          ['bac', 240],
          ['bac', 241],
          ['bac', 242],
          ['bac', 243],
          ['bac', 244],
          ['bac', 245],
          ['bac', 246],
          ['bac', 247],
          ['bac', 248],
          ['bac', 249],
          ['bac', 250],
          ['bac', 251],
          ['bac', 252],
          ['bac', 253],
          ['bac', 254],
          ['bac', 255],
          ['bac', 256],
          ['bac', 257],
          ['bac', 258],
          ['bac', 259],
          ['bac', 260],
          ['bac', 261],
          ['bac', 262],
          ['bac', 263],
          ['bac', 264],
          ['bac', 265],
          ['bac', 266],
          ['bac', 267],
          ['bac', 268],
          ['bac', 269],
          ['bac', 270],
          ['bac', 271],
          ['bac', 272],
          ['bac', 273],
          ['bac', 274],
          ['bac', 275],
          ['bac', 276],
          ['bac', 277],
          ['bac', 278],
          ['bac', 279],
          ['bac', 280],
          ['bac', 281],
          ['bac', 282],
          ['bac', 283],
          ['bac', 284],
          ['bac', 285],
          ['bac', 286],
          ['bac', 287],
          ['bac', 288],
          ['bac', 289],
          ['bac', 290],
          ['bac', 291],
          ['bac', 292],
          ['bac', 293],
          ['bac', 294],
          ['bac', 295],
          ['bac', 296],
          ['bac', 297],
          ['bac', 298],
          ['bac', 299],
          ['bac', 300],
          ['bac', 301],
          ['bac', 302],
          ['bac', 303],
          ['bac', 304],
          ['bac', 305],
          ['bac', 306],
          ['bac', 307],
          ['bac', 308],
          ['bac', 309],
          ['bac', 310],
          ['bac', 311],
          ['bac', 312],
          ['bac', 313],
          ['bac', 314],
          ['bac', 315],
          ['bac', 316],
          ['bac', 317],
          ['bac', 318],
          ['bac', 319],
          ['bac', 320],
          ['bac', 321],
          ['bac', 322], ]

bacrun = [['bac', 285]]

LS = runner.LaserSearch()

#LS.search_multiple(observations, output_pngs=1, number_mads=8)

p = Pool(6)
search_multi = lambda x: LS.search_multiple([x], output_pngs=1,number_mads=20, search_title='bac285')

pool_output = Pool.map(p, search_multi, bacrun)

